# GitHub Pages용 리다이렉션 및 404 처리
ErrorDocument 404 /k090912kkk/index.html

# URL 정규화
RewriteEngine On

# /home으로 접근하면 home.html로 리다이렉트
RewriteRule ^home/?$ home.html [L,R=301]

# /sk6070으로 접근하면 sk6070/index.html로 리다이렉트
RewriteRule ^sk6070/?$ sk6070/index.html [L,R=301]

# /gbeovhsthdorrufwp로 접근하면 gbeovhsthdorrufwp/index.html로 리다이렉트
RewriteRule ^gbeovhsthdorrufwp/?$ gbeovhsthdorrufwp/index.html [L,R=301]

# 특정 파라미터가 있는 URL 처리
RewriteCond %{QUERY_STRING} ^idx=([0-9]+)&bmode=view
RewriteRule ^sk6070/$ sk6070/index.html? [L,R=301]

# 카테고리 파라미터 처리
RewriteCond %{QUERY_STRING} ^category=
RewriteRule ^home$ home.html? [L,R=301]

# 로그아웃 URL 처리
RewriteRule ^logout\.cm$ logout.cm [L]

# 보안 헤더 추가
<IfModule mod_headers.c>
    Header always set X-Content-Type-Options nosniff
    Header always set X-Frame-Options DENY
    Header always set X-XSS-Protection "1; mode=block"
    Header always set Referrer-Policy "strict-origin-when-cross-origin"
</IfModule>

# 캐시 설정
<IfModule mod_expires.c>
    ExpiresActive on
    ExpiresByType text/html "access plus 1 hour"
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType image/png "access plus 1 month"
    ExpiresByType image/jpg "access plus 1 month"
    ExpiresByType image/jpeg "access plus 1 month"
    ExpiresByType image/gif "access plus 1 month"
    ExpiresByType image/svg+xml "access plus 1 month"
</IfModule>

# GZIP 압축
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/plain
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/xml
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/xml
    AddOutputFilterByType DEFLATE application/xhtml+xml
    AddOutputFilterByType DEFLATE application/rss+xml
    AddOutputFilterByType DEFLATE application/javascript
    AddOutputFilterByType DEFLATE application/x-javascript
</IfModule>